Lesson 5\n\nManaging Users, Workstations, and Shared Resources\n\nLESSON INTRODUCTION\n\nOnce you have the computer network up and running, you can start to configure it to provide useful services. File and print sharing are key uses of almost every network. When configuring these resources, you have to be aware of potential security issues and understand how to set permissions correctly, to ensure that data is only accessible to those users who really should have been authorized to see it.\n\nAlong with permissions, you will also need to manage user accounts on networks. Windows® networks can use local accounts within workgroups or centralized Active Directory* accounts on a domain network. In this lesson, you will learn some basic principles for managing users in both types of environment.\ntag:C2 L5

LESSON OBJECTIVES\n\nIn this lesson, you will:\n• Manage Windows local user and group accounts.\n• Configure network shares and permissions.\n• Configure accounts and policies in Active Directory domains.\ntag:C2 L5

Topic A\n\nManage Users\n\nEXAM OBJECTIVES COVERED\n\n1002-1.4 Given a scenario, use appropriate Microsoft command line tools.\n1002-1.5 Given a scenario, use Microsoft operating system features and tools.\n1002-1.6 Given a scenario, use Microsoft Windows Control Panel utilities.\n1002-2.6 Compare and contrast the differences of basic Microsoft Windows OS security settings.\n\nManaging user accounts and permissions is an important task on any type of network. In this topic, you will learn how group accounts can be used to allocate permissions more easily and use consoles to configure system policies that can improve the security of the computer and network.\ntag:C2 L5 TA

USER AND GROUP ACCOUNTS\n\nA user account is the principal means of controlling access to computer and network resources and rights or privileges. The User Accounts applet in Control Panel is adequate for creating accounts on a family computer. If you are configuring computers for business use, you might want to use more advanced tools to create group accounts as well as user accounts.\n\nSECURITY GROUPS\nA security group is a collection of user accounts that can be assigned permissions in the same way as a single user object. Security groups are used when assigning permissions and rights, as it is more efficient to assign permissions to a group than to assign them individually to each user. You can assign permissions to a user simply by adding the user to the appropriate group(s).\n\n| Group | Description |\n| --- | --- |\n| Built-in Local Groups | Built-in groups are given a standard set of rights that allow them to perform appropriate system tasks, Starter and Home editions of Windows allow the use of two groups only: |\n| | • Limited/standard user. |\n| | • Computer administrator. |\n| | For Windows Professional/Business, the principal built-in local groups include Administrators, Users, Guests, and Power Users. |\n| Administrators | An Administrator account can perform all management tasks and generally has very high access to all files and other objects in the system. The user created at installation is automatically added to this group. You should restrict use of this type of account, using a regular user account when appropriate, and only log in with administrative privileges for specific tasks. |\n| | When Windows is installed to a new computer, the account actually named "Administrator" is disabled by default. The setup procedure creates an account with administrative privileges in its place. |\n| | Note: If the computer is not part of a domain, the “Administrator” account is re-enabled in Safe Mode if all other administrative accounts have been deleted or disabled (as a disaster recovery mechanism). Note that the "Administrator" account is not subject to UAC and so should be left disabled if the computer is to be used securely. |\n| Users | When a new user is created, they are typically added to the standard Users group. The group is able to perform most common tasks, such as shutting down the computer, running applications, and using printers. Ordinary users can also change the time zone and install a local printer, provided there is a suitable driver already installed. |\n| Guests | The Guests group has only limited rights; for example, members can browse the network and Internet and shut down the computer but cannot save changes made to the desktop environment. Generally, you should disable the Guest account (its default condition) and establish a proper user account for each user accessing your system. If the account is enabled, then any user attempting to access your computer who does not hold their own user account, will be connected using the Guest account credentials. |\n| | Note: The default Guest account is the only member of the Guests group. While the Guest user account is usually disabled, the Guests group is not.\n| Power Users | The Power Users group still appears to support legacy applications, but its use is strongly deprecated. The rights allocated to this account type can be abused to allow the user to obtain more powerful Administrator or System privileges. You can read more about issues with using Power Users at https://support.microsoft.com/en-us/help/825069/a-member-of-the-power-users-group-may-be-able-to-gain-administrator-ri. |\n| System Groups | There are a number of other default groups, providing a means to easily configure things like privileges to access remote desktop, backup, event logs, and so on. Windows also includes. built-in system groups. Their membership cannot be changed manually, as itis dependent on what users are doing at the time. |\n| | • Everyone—All users who access the computer are members of the group Everyone. This includes users who have not been authenticated and who are accessing the computer as a guest. |\n| | • Authenticated Users—All users who access the computer and have a valid user account. |\n| | • Creator Owner—The Creator Owner group includes the account of the resource owner. Normally, the creator of a resource is the owner, but administrators (and other users who have been allowed to do so) are able to take ownership. |\n| | • Interactive—This group contains the user account of the person currently working locally at the computer. |\n| | • Network—This group contains the user account(s) of any users currently connected to the computer over a network. |\n| System and Service Accounts | There are also some non-interactive accounts that you should be aware of. Users cannot sign in to these accounts. They are “owned” by the OS (NT_AUTHORITY). They are used to run Windows processes and services: |\n| | • Localsystem—An account with the same, or in some ways better, privileges as the default Administrator account. A process executed using the system account is unrestricted in terms of making changes to the system configuration and. file system. |\n| | • Localservice—A limited account used to run services that cannot make system-wide changes. LocalService can access the network anonymously. |\n| | • NetworkService—An account that has the same privileges as LocalService but can access the network using the computer's machine account's credentials. |\ntag:C2 L5 TA

LOCAL USERS AND GROUPS\n\nIn Pro, Professional, and Enterprise editions of Windows, the Local Users and Groups management console provides an interface for managing both user and group accounts. It is not available in Starter or Home editions.\n\n[file:///fig-327.png]\nLocal Users and Groups management console. (Screenshot used with permission from Microsoft.)\n\nCREATING A NEW USER\nTo create a user, right-click on or in the Users folder and select New User. The account can be configured with the following properties:\n\n| Setting | Use |\n| --- | --- |\n| Username | The username may be up to 20 characters and cannot contain (required) the characters "\{]:; | =, + *?<> The username must be unique. Usernames are not case sensitive. |\n| Full name (optional) | This should include the first and last name, and any middle initials if required. |\n| Description (optional) | May be used to describe the user's job role. |\n| Password (optional but recommended) | Passwords can be up to 128 characters (at least 8 is recommended). Passwords are case sensitive. Avoid passwords that simply use words; include upper and lower case letters, punctuation, and numbers. |\n| User must change password at next logon | A useful way to ensure that an administrator-assigned password is reset by the user when they first access the account.\n| User cannot change password | Generally, users control their own passwords, but for some user accounts it is preferable for the administrator to control the password.\n| Password never expires | A useful option which overrides the local security policy to expire passwords after a fixed number of days. This option should be selected for system accounts, such as those used for replication and application services.\n| Account is disabled | Prevents use of the account. Acts as an alternative to deleting an account. |\n\nRENAMING AND DELETING USER ACCOUNTS\nTo rename a user account, select the account name, then right-click and choose the Rename option. A renamed account retains all the properties of the original account and also retains access to system resources.\n\nTo delete an account, select the account name and either press the Delete key or choose Delete from the context menu.\n\nWindows uses a Security ID (SID) to uniquely identify each user and group. A warning message is displayed to remind you that this account identifier is unique. Even if you recreate another account with exactly the same username, the identifier created is still different. The new account cannot assume any access to resources that were assigned to the original.\n\nDisabling an account prevents it from being used, but allows the account to be reactivated if required.\n\nADDING A USER TO A GROUP\nWhen a user is made a member of a group, the user obtains all the permissions allocated to that group. A user account can be a member of more than one group account. To add a user to a group or remove a user from a group, right-click the group account and select Properties.\n\n[file:///fig-328.png]\nConfiguring members of the Administrators built-in group. (Screenshot used with permission from Microsoft.)\n\nTHE net user COMMANDS\nYou can also manage accounts at the command line using thenet user command. You need to execute these commands in an administrative command prompt:\n\n• net user dmartin Pa$$w0rd /add /fullname: "David Martin" /logonpasswordchg: yes\n\nThis example adds a new user account and forces the user to choose a new password at first login.\n\n• net user dmartin /active:no\nDisables the dmartin account.\n\n• net user dmartin\nShow the properties of the dmart in account.\n\n• net localgroup Administrators dmartin /add\nAdd the dmartin account to the Administrators local group.\n\nNote: Don't confuse net usercommands with net use, which is for configuring file shares.\ntag:C2 L5 TA

LOCAL SECURITY POLICY\n\nPolicies are the most fine-grained means of adjusting registry settings outside of editing the registry directly. Policies can be used to configure almost any aspect of Windows, from the color of the desktop to the number of characters required in a user password.\n\nOn a standalone workstation, password and account policies can be configured via the Local Security Policy snap-in (secpo1.msc) located in Administrative Tools. You would use this to force users to choose more complex or longer passwords or to prevent users from re-using old passwords.\n \n[file:///fig-329.png]\nLocal Security Policy editor. (Screenshot used with permission from Microsoft.)\n\nA wider range of settings can be configured via the Local Group Policy snap-in\n(gpedit.msc). Group policy exposes pretty much the whole of the registry to\nconfiguration via a dialog-based interface, rather than editing individual keys through regedit. Policies can be applied to the computer object or to user accounts.\n\n[file:///fig-330.png]\nThe Local Group Policy editor. You can edit the same security policies here but any other number of computer and user account settings can also be configured. (Screenshot used with permission from Microsoft.)\n\nNote: The policy editors are not included in the Starter or Home editions of Windows.\ntag:C2 L5 TA

SSO AND CREDENTIAL MANAGER\n\nSingle Sign On (SSO) means that a user only has to authenticate to a system once to gain access to all its resources (that is, all the resources to which the user has been granted rights). An example is the Kerberos authentication and authorization model. for Active Directory domain networks. This means, for instance, that a user who has authenticated with Windows is also authenticated with the Windows domain's SQL Server® and Exchange Server services. Another example is the use of a Microsoft account to sign in to Windows and also be signed in to web applications such as OneDrive® and Office365®.\n\nThe advantage of single sign-on is that each user does not have to manage multiple user accounts and passwords. The disadvantage is that compromising the account also compromises multiple services.\n\nNote: It is critical that users do not re-use work passwords or authentication information ‘on third-party sites. Of course, this i almost impossible to enforce, so security managers have to rely on effective user training.\n\nCREDENTIAL MANAGER\n550 is not available for many services. Most users do not try to remember each password for every website or network they use. Instead, they use the OS to save (or cache) the password. You can view cached passwords for websites and Windows/network accounts using the Control Panel app Credential Manager.\n\nYou can remove any credentials that you no longer want to store, Removing a credential may also resolve an authentication or service problem. You can view the plaintext of a web credential but not of a Windows credential.\n\n[file:///fig-331.png]\n(Credential Manager. (Screenshot used with permission from Microsoft.)\ntag:C2 L5 TA

Activity 5-1\nDiscussing Windows User Management\n\nSCENARIO\nAnswer the following questions to check your understanding of the topic.\n\n1. Which three principal user security groups are created when Windows is installed?\n\n2. What tool would you use to add a user to a local security group?\n\n3. True or false? If you delete a user, you can recover the user's permissions and group memberships by creating a new account with the same name.\n\n4. How can you ensure that an administrator-set default password for an account is not used permanently?\n\n\n5. What is the function of secpol.NSC?\ntag:C2 L5 TA A5-1

Topic B\nConfigure Shared Resources\n\nEXAM OBJECTIVES COVERED\n1002-1.4 Given a scenario, use appropriate Microsoft command line tools.\n1002-1.6 Given a scenario, use Microsoft Windows Control Panel utilities.\n1002-1.8 Given a scenario, configure Microsoft Windows networking on a client/desktop.\n1002-2.6 Compare and contrast the differences of basic Microsoft Windows OS security settings\n\nOne of the main uses of networks is for file and printer sharing. As a CompTIA A+ technician, you will often need to configure network shares. It is important that you configure the correct permissions on shares, understanding how share and NTFS permissions interact.\ntag:C2 L5 TB

WORKGROUPS\n\nIna peer-to-peer network, each computer can be both a server and a client. Each user administers his or her PC and the resources on it. The user can decide to give others access to files on his or her PC or to printers that are attached to it. Under Windows, this type of network is described as a workgroup.\n\n[file:///fig-333.png]\nPeer-to-peer network. (Image © 123RF.com.,)\n\nA workgroup is quite simple to set up initially, but unreliable and difficult to organize. For example, a user could switch off their machine while someone else was accessing, it. There is no good means of deciding who should have access to the network. It is difficult to grow the network, as when a machine or new user is added, all the other machines have to be “informed” about it.\n\nWorkgroups are designed to support small groups of users. There is no centralized management of user accounts or of resources, and each machine requires a separate administrator. Desktop operating systems such as Windows can act as servers in a workgroup, but they are restricted in terms of the number of inbound connections they can support.\n\n[file:///fig-334.png]\nWorkgroup security accounts are all stored locally. (Image © 123RF.com.)\n\nNote: Not all real-world networks are completely peer-to-peer or completely client-server. Some networks use a mixture of both approaches.\n\nAs different versions of Windows have been released, Microsoft has implemented different ways for users to set up home networks simply.\n\nNote: The workgroup name can be changed using the Computer Name dialog box from System properties. The workgroup name is cosmetic, however. It is almost always left set to "WORKGROUP."\ntag:C2 L5 TB

HOMEGROUPS\n\nA homegroup is a feature introduced in Windows 7, and continued in Windows 8, to simplify secure access to shared folders and printers on a home network.\n\nThe problem with a workgroup network is that there is no centralized database of users. Sharing folders would either require the local user's password to be shared, identical user accounts to be set up and maintained on each machine, or facilitated via the Guest account with no authentication.\n\nHomegroups are secured via a simple password. A computer can only belong to one homegroup at a time, Homegroups can contain a mix of Windows 7 and Windows 8 computers.\n\nTo set up a homegroup, open the Network and Sharing Center and select Choose homegroup and sharing options.\n\n[file:///fig-335.png]\nConfiguring a homegroup—choosing which resources to share. (Screenshot used with permission from Microsoft.)\n\nNote: The network type must be defined as Home (Windows 7) or Private (Windows 8) or Windows will not allow the creation of a homegroup. Also, IPv6 must be enabled for homegroups to work.\n\nJOINING A HOMEGROUP\nWhen a homegroup has been configured on a network, you will see a Join now button when you are browsing the Homegroup object in Explorer. Having joined a group, network users can access shared libraries and folders and choose whether to share their own libraries. Shared homegroup folders are shown via the Homegroup object in Explorer, which shows all the user accounts participating in the homegroup.\n\nWINDOWS 10 AND HOMEGROUPS\nThe early versions of Windows 10 continued to support the homegroup feature. With the release of Windows 10 (1803), support for homegroups was discontinued. Windows 10 (1803) computers cannot create or join a homegroup.\n\nNote: At the time of writing, a bug means that homegroup options can still appear in a {folder's Give Access To shortcut menu. These options do not do anything.\ntag:C2 L5 TB

NETWORK AND SHARING CENTER\n\nWhenever a new network link is detected, Windows prompts you to define it as Public or Private (Home or Work). The former option disables file and printer sharing and, network discovery on the link. On a private network, you can customize the sharing options to include printers, disable password-protected sharing, and so on. These options are configured via the Network and Sharing Center.\n \n[file:///fig-336.png]\nNavigating the Windows 7 Network and Sharing Center—1) Select to view computers on the network: 2) Select a cross to start the troubleshooter; 3) Select to open the web browser; 4) Select the network icon to manage names and locations; 5) Select the link to change the network type; 6) Select the adapter link to view status and configure properties. (Screenshot used with permission from Microsoft.)\n\nIn Windows 8 and Windows 10, the network map feature has been dropped and there\nis no option to change the network location type. This is done via Windows Settings instead. Select Network & Internet and then Ethernet or WiFi as appropriate. Under Network profile, select Public or Private.\n\nNote: Note that the "Network profile” options do not appear if UAC is set to the highest “Always notify" level.\n\nADVANCED SHARING SETTINGS\nFrom the Network and Sharing Center, select Advanced sharing settings to configure the options for each profile. To share files on the network, Turn on network discovery and Turn on file and printer sharing must both be selected.\n\n[file:///fig-337.png]\nAdvanced sharing settings. (Screenshot used with permission from Microsoft)\n\nWindows has a pre-defined folder for sharing files (the Public folder), which is available to all users of the PC and to network users, if enabled here.\n\nUnder All networks, you can select Turn off password-protected sharing to allow\nanyone to access any file share configured on the local computer without entering any credentials. This enables the Guest user account, which is normally disabled.\n\nNote: For password-protected sharing, network users must have an account configured on the local machine. This is one of the drawbacks of workgroups compared to domains. Either you configure accounts for all users on all machines, use a single account for network access (again, configured on all machines), or you disable security entirely.\ntag:C2 L5 TB

NETWORK SHARE CONFIGURATION\n\nYou can share other folders by right-clicking and selecting Share with (Windows 7) or Give access to (Windows 10). Select an account, then set the Permission level to Read or Read/write as appropriate.\n\n[file:///fig-338.png]\nConfiguring Advanced Sharing properties. (Screenshot used with permission from Microsoft.)\n\nADVANCED SHARING\nIn the folder’s property dialog box, you can use the Share tab to configure advanced share properties:\n\n• Share name and optional comment—the share name identifies the share on the network while the comment can describe the purpose of the share. You can share the same folder multiple times with different names and permissions.\n\n• Maximum number of users allowed to connect at any one time—Windows desktop versions are limited to 20 inbound connections. Only Windows Server systems support more connections.\n\n• Permissions—choose the groups or users allowed to access the folder and what type of access they have.\n\n[file:///fig-339.png]\nConfiguring Advanced Sharing properties—Notice that while Everyone has "Read" permission, the share permissions for Everyone are “Full Control." The "Read" permission is enforced by NTFS security. (Screenshot used with permission from Microsoft.)\n\nWindows provides three levels of share permissions:\n\n• Full Control—allows users to read, edit, create, and delete files and subdirectories, and to assign permissions to other users and groups.\n\n• Change—this is similar to full control but does not allow the user to set permissions for others.\n\n• Read—users are permitted to connect to the resource, run programs, and view files. They are not allowed to edit, delete, or create files.\n\nMost of the time, the shared folder permission is set to Full Control. The effective permissions are managed using NTFS security.\n\nMANAGING SHARED FOLDERS\nThe Shared Folders snap-in (available through the Computer Management console) lets you view all the shares configured on the local machine as well as any current user sessions and open files.\n\n[file:///fig-340.png]\nViewing the Shared Folders snap-in via the Computer Management console. (Screenshot used with permission from Microsoft.)\n\nADMINISTRATIVE SHARES\nYou can think of the shares configured manually on a computer using the process described previously as local shares. In addition to any local shares created by a user, Windows automatically creates a number of hidden administrative shares, including the root folder of any local drives (CS), the system folder (ADMINS), and the folder storing printer drivers (PRINTS). Administrative shares can only be accessed by members of the local Administrators group.\n\nNote: Note that if you disable password-protected sharing, the administrative shares remain password-protected.\n\nIn fact, if you add a $ sign at the end of a local share name, it will be hidden from general browsing too. It can still be accessed via the command-line or by mapping a drive to the share name.\n\nBROWSING SHARES AND MAPPING DRIVES\nIn File Explorer, network shares are listed by the server computer under the system object Network. Any network-enabled devices such as wireless displays, printers, smartphones, and router/modems are also listed here. The shortcut menu for Network allows you to open the Network and Sharing Center (via the Properties option) and map of disconnect network drives.\n\n[file:///fig-341.png]\nViewing devices on the network—the Laserjet 200 printer listed here is connected directly to the network. (Screenshot used with permission from Microsoft.)\n\nYou can also access a shared folder using Universal Naming Convention (UNC) syntax (\\ComputerName\Path), where ComputerName is the host name, FQDN, or IP address of the server and Path is the folder and/or file path. Remember that you can view an administrative share this way (if you have the relevant permissions). For example, the path \\COMPTIA\Adming connects to the "Windows" folder on the "COMPTIA" computer.\n\nA network drive is a local share that has been assigned a drive letter. To map a share as a drive, right-click it and select Map Network Drive. Select a drive letter and keep Reconnect at sign-in checked, unless you want to map the drive temporarily. The drive will now show up under Computer or This PC. To remove a mapped drive, right-click it and select Disconnect.\n\n[file:///fig-342.png]\nMapping a network drive. (Screenshot used with permission from Microsoft.)\n\nPRINTER SHARING VERSUS NETWORK PRINTER MAPPING\nMany print devices come with an integrated Ethernet and/or Wi-Fi adapter. This means that they can communicate directly on the network, Such a printer can be mapped using the Add Printer wizard (from Devices and Printers). Just enter the IP address or host name of the printer to connect to it.\n\nAny printer directly connected to a computer (whether via USB or direct network connection) can also be shared so that other network users can access it. A local printer is shared on the network via the Sharing tab on its Printer Properties sheet. To connect to a shared printer, open the server object from Network and the printer will be listed. Right-click it and select Connect.\n\n[file:///fig-342a.png]\nConnecting to a printer shared via the COMPTIA PC—Note that this is the same Laserjet 200 print device as shown earlier but it is being connected to as a shared device, rather than mapped directly. (Screenshot used with permission from Microsoft.)\ntag:C2 L5 TB

OFFLINE FILES AND SYNC CENTER\n\nOne of the issues with a workgroup is that a computer may get turned off by its user without the user consulting the rest of the workgroup first. There is no centralized control or administration over access to resources. If you need to use files on a network share where the connection is unreliable for any reason, you can use Windows’ offline files feature to cache the files in the share on your local computer. To enable this, just right-click the share or mapped drive and select Always available offline.\n\nWhen the connection is restored, any changes between the local cache and the network share are synchronized automatically. If there are any conflicts, these are reported in the Sync Center Control Panel applet. You can use the Resolve button to choose whether to keep one or both versions.\n\n[file:///fig-343.png]\nUsing Sync Center to resolve file conflicts in an offine folder cache. (Screenshot used with permission from Microsoft.)\ntag:C2 L5 TB

THE net COMMANDS\n\nThere are several net command utilities that you can use to view and configure shared resources on a Windows network. A few of the commands are provided here, but you can view the full ist by entering net /? You can view help on a specific command by entering net use /?\n• net use DeviceNane \\ComputerName\ShareName\nThis command will connect to a network resource, such as a folder or printer. For ‘example, to map the DATA folder on MYSERVER to the M: drive, you would enter:\nnet use M:\\MYSERVER\DATA /persistent: yes\n• net use DeviceName /delete\nThis command removes a connection (net_use * /delete removes all connections).\n• net view\nUsed without switches, this displays a list of servers on the local network. Use net view \\Host to view the shares available on a particular server (where Hostis an IP address or computer name).\ntag:C2 L5 TB

NTFS FILE AND FOLDER PERMISSIONS\n\nWhen you configure a network share, you can set share permissions for the accounts allowed to access the share. Share permissions have a number of limitations:\n\n• The resource is only protected when a user connects over the network. Someone gaining access to the local machine would not have the same restrictions.\n\n• The permissions set apply from the root of the share and all subdirectories and files within the share inherit the same permissions.\n\nSystems that use the FAT file system are only able to support share permissions, but with NTFS it is possible to implement a much more comprehensive and flexible system of permissions. NTFS security protects the resource even when it is accessed locally and has a configurable system of propagation and inheritance.\n\nWindows enforces local security on an NTFS volume by holding an Access Control List (ACL) as part of the record for each file and folder stored in the volume's Master File Table (MFT). When a user attempts to access a file or directory, the security system checks which users and groups are listed in the ACL. A list of permissions is then obtained for that user.\n\nSecurity can be applied to individual files or (more commonly) to folders. When folders are secured, the matter of inheritance needs to be considered.\n\n[file:///fig-344.png]\nConfiguring NTFS permissions via the Security tab for a folder. (Screenshot used with permission from Microsoft.)\n\nCONFIGURING NTFS PERMISSIONS\nTo configure the NTFS security settings of a file or folder, right-click the object and select Properties, then select the Security tab. Users that may set permissions are restricted to administrators, users with full control permissions, and the owner of the file or folder.\n\nPermissions that may be applied to folders differ from those that apply to files. The differences are summarized in the following tables. Note that each permission may either be allowed or denied.\n\n| Folder Permission | Allows |\n| --- | --- |\n| Read | View files and subfolders including their attributes, permissions, and ownership. |\n| write | Create new folders and files, change attributes, view permissions and ownership. |\n| List | View the names of files and subfolders. |\n| Read & Execute | Pass-through folders for which no permissions are assigned, plus read and list permissions. |\n| Modify | Read/Execute and Write permissions, as well as the ability to rename and delete the folder. |\n| Full Control | All the above, plus changing permissions, taking ownership, and deleting subfolders and files. |\n\n| File Permission | Allows |\n| --- | --- |\n| Read | Read the contents of the file and view attributes, ownership, and permissions. |\n| Write | Overwrite the file and view attributes, ownership, and permissions. |\n| Read & Execute | Read permissions, plus the ability to run applications. |\n| Modify | Read/Execute and Write permissions, as well as the ability to rename and delete the file. |\n| Full Control | All the above, plus changing permissions and taking ownership. |\n\nNote: These are available via the basic interface. There are in fact 12 individual permissions that could be applied to a file or folder (select Advanced), but the combinations listed are usually sufficient.\n\nEFFECTIVE PERMISSIONS AND ALLOW VERSUS DENY\nPermissions are usually applied at one of three levels:\n\n• For application folders, the read/execute permission is granted to the appropriate group.\n\n• For data areas, the modify or read permission is assigned as appropriate.\n\n• To home directories (personal storage areas on a network), full control is assigned to the relevant user.\n\nA user may obtain multiple permissions from membership of different groups or by having permissions allocated directly to his or her account. Windows analyzes the permissions obtained from different accounts to determine the effective permissions. In this process, itis important to understand that “deny” overrides anything else (in most cases). If an account is not granted an “allow” permission, an implicit deny is applied. This is usually sufficient for most purposes. Explicit deny permissions are only used in quite specific circumstances.\n\nPutting explicit deny permissions to one side, the user obtains the most effective “allow” permissions obtained from any source. For example, if one group gives the user "Read" permission and another group gives the user "Modify" permission, the user will have "Modify" permission.\n\nPERMISSION PROPAGATION AND INHERITANCE\nNTFS permissions that are assigned to a folder are automatically inherited by the files and subfolders created under the folder. To prevent this from happening, open the Security page and select Advanced, then select the Permission tab. In Windows 7, select the Change permissions button to proceed.\n\nSelect the Disable inheritance button. In Windows 7, there is an Include inheritable permissions check box to uncheck rather than a button. Then, choose whether to Convert inheritable permissions into explicit permissions (in Windows 7, this is the Copy option) or Remove inherited permissions. You can then modify the permissions on this folder independently of its parent.\n\nTo apply security settings for the current folder to all child objects (permission propagation), check the Replace all child object permissions with inheritable permissions box.\n\n[file:///fig-346.png]\nConfiguring permissions inheritance on a folder. (Screenshot used with permission from Microsoft.)\n\nNote: Directly assigned permissions (explicit permissions) always override inherited permissions, including “deny” inherited permissions. For example, if a parent folder specifies deny write permissions but an account is granted allow write permissions directly on a child file object, the effective permission will be to allow write access on the file object.\ntag:C2 L5 TB

OWNERSHIP\n\nThe owner of a resource can manage that resource in terms of permissions and other attributes. Generally speaking, if a user creates a file, they will own the file. Administrators can assign ownership to some other user (or group). This might be done because the current owner of a resource has been deleted from the user accounts database.\n\nWhen a folder's ownership details are modified, the administrator can choose to propagate the changes down the tree to subfolders and their contents.\n\nMOVING AND COPYING NTFS FILES AND FOLDERS\nThe behavior of NTFS permissions when moving and copying files under Windows is summarized in the following table.\n\n| Action | Effect |\n| --- | --- |\n| Moving files and folders on the same NTFS volume | Write permission is required for the destination folder and Modify for the source folder. NTFS permissions are retained. |\n| Moving files and folders to a different NTFS volume | Write permission is required for the destination folder and Modify for the source folder. NTFS permissions are inherited from the destination folder and the user becomes the Creator/Owner. |\n| Copying files and folders on the same NTFS volume or different NTFS volumes | Write permission is required for the destination folder and  Read for the source folder. NTFS permissions are inherited_from the destination folder and the user becomes the Creator/Owner. |\n| Moving files and folders to a FAT or FAT32 partition | Modify permission is required for the source folder. All permissions and NTFS attributes (such as encryption) are lost, as FAT does not support permissions or special attributes. |\n\nCOMBINING NTFS AND SHARE PERMISSIONS\nIt is possible to use a combination of share and NTFS permissions to secure resources. The factors to consider include:\n\n• Share permissions only protect the resource when it is accessed across the network.\n\n• NTFS permissions are used to protect the resource from unauthorized local access.\n\n• Disk partitions using the FAT file system can only be protected using share permissions.\n\n• Share permissions are set at the root of the share and all files and subdirectories inherit the same permissions.\n\n• NTFS permissions are used in combination with the share permissions to provide greater flexibility; for example, to place more restrictive permissions at lower levels in the directory structure.\n\n• If both share and NTFS permissions are applied to the same resource, the most restrictive applies (when the file or folder is accessed over the network). For example, if the group "Everyone" has Read permission to a share and the "Users" group is given Modify permission through NTFS permissions, the effective Permissions for a member of the "Users" group will be Read.\n\n[file:///fig-348.png]\nEffective permissions through a shared folder. (Image © 123RF.com.)\n\nIn practice, share permissions are always configured as Full Control and the NTFS permissions are used to configure the actual rights.\n\nNote: if you do not have sufficient permissions to access or modify a resource, you will ssee an "Access denied’ error message.\ntag:C2 L5 TB

Activity 5-2\nDiscussing Shared Resource Configuration\n\nSCENARIO\nAnswer the following questions to check your understanding of the topic.\n\n1. You are setting up a Windows 10 workstation as a file server for a small office. How many computers can connect to the file share at any one time?\n\n2. What is the significance of a $ symbol at the end of a share name?\n\n3. What basic NTFS permissions do you need to move a file and to copy a file?\n\n4. When you set permissions on a folder, what happens to the files and subfolders by default?\n\n5. If a user obtains Read permissions from a share and Deny Write from NTFS. permissions, can the user view files in the folder over the network?\n\n6. A user is assigned Read permissions to a resource via his user account and Full Control via membership of a group.\nWhat effective permission does the user have for the resource?\ntag:C2 L5 TB A5-2

Activity 5-3\nConfiguring Shared Resources\n\nBEFORE YOU BEGIN\nComplete this activity by using Hyper-V Manager and the PC1 (Windows 10) and PC2 (Windows 7) VMs.\n\nSCENARIO\nIn this activity, you will configure the two client VMs as part of a workgroup and practice creating users and shares.\n\n1. Both PC1 and PC2 are joined to a domain. To complete this activity, you need to remove PC2 from the domain and join it to the WORKGROUP workgroup.\na) Start the PC2.VM, and sign on using the account 525support\ administrator and Password Pa$$w0rd\n\nb) Select Start, right-click Computer, and select Properties.\n\nc) In the System applet, under Computer name, domain, and workgroup settings, select Change settings.\n\nd) In the System Properties dialog box, select the Change button.\n\ne) Select the Workgroup option button and type WORKGROUPin the box.\n\nf) Select OK.\n\ng) At the Computer Name/Domain Name Changes prompt, select OK.\n\nh) In the Windows Security dialog box, enter the user name administrator and the password Pa$$w0rd and then select OK.\n\n[file:///fig-350]\nLeaving domain and joining a workgroup in Windows 7—there are a lot of dialog boxes to lick through! (Screenshot used with permission from Microsoft.)\n\ni) When you are prompted by the Welcome to the WORKGROUP workgroup dialog box, select OK, and then select OK again to confirm that a restart is required.\n\nj) In the System Properties dialog box, select the Close button.\n\nk) At the Microsoft Windows prompt, select Restart Now.\n\n2. Configure PC1 to join the workgroup by using the Settings app.\n\na) Start the PC1 VM and sign on using the account 525support| administrator and Password Pa$$w0rd\n\nb) Select the Start button, and select the Settings icon.\n\nc) Select Accounts and then select the Access work or school node.\n\nd) Select Connected to 515support AD domain then select the Disconnect button, Confirm the prompt by selecting Yes.\n\ne) Confirm again by selecting Disconnect.\n\nf) In the Enter alternate account info box, enter the user name Admin with Pa$$w0rd and select OK.\n\ng) When you are prompted, select Restart now.\n\n3. Create a standard user account named Sam on PC2.\n\na) Switch to the PC2 VM, and sign on using the account Admin and password Pa$$w0rd \n\nb) Select Start, right-click Computer, and select Manage.\n\nc) Expand Local Users and Groups and select the Users folder.\n\nd) Right-click Users and select New User.\n\ne) In the User name box, type Sam and then type Pa$$w0rd in the Password and\nConfirm password boxes.\n\nf) Uncheck User must change password at next logon, and then select the Create\nbutton.\n\ng) Select the Close button.\n\nh) Select Start, then select the arrow on the Shut down button, and select Log off.\n\ni) Select the Sam user account icon. Type Pa$$w0rd in the password box and then press Enter.\n\n4. Configure anonymous file sharing on PC1.\n\na) Switch to the PC1 VM, and sign on using the account Admin and password Pa$$w0rd\n\nb) Select the network status icon and select Network & Internet settings.\n\nc) In the Settings app, select Sharing options.\n\nd) Under Guest or Public, select Turn on network discovery and Turn on file and\nprinter sharing.\n\ne) Expand the All Networks section.\n\nf) Select Turn off password protected sharing.\n\ng) Select Save changes.\n\nh) Leave the Settings app open.\n\n5. Examine the changes this setting has made to the Guest account, and observe security group memberships.\n\na) Right-click Start and then select Computer Management.\n\nb) Expand Local Users and Groups and select the Users folder.\n\nc) Observe that the Guest account is enabled.\n\nd) Select the Groups folder, and observe the builtin groups.\n\ne) Right-click Guests and select Properties.\n\nf) Verify that the only member is the Guest user account.\n\ng) Select Cancel.\n\nh) Right-click Administrators and select Properties. This group contains the built-in Administrator user account. This root-type account should not be used, The Admin user was created during setup.\n\ni) Select Cancel.\n\nj) Leave the Computer Management console open.\n\n6. Create an anonymous read only file share to the C:\LABFILES folder on PC1.\n\na) Open File Explorer and browse to the CA root folder.\n\nb) Right-click the LABFILES folder and select Give access to~ Specific people.\n\nc) From the list box, select the Everyone account and select the Add button.\n\nd) Verify that the permission level defaults to Read.\n\ne) Select the Share button.\n\nf) Select Done.\n\n7. Test the file share by connecting to it from PC2.\n\na) Switch to the PC2 VM.\n\nb) Open Windows Explorer and browse to the share using its UNC path: \\PC1\LABFILES.\n\nc) Copy a file from the share to your desktop.\n\nd) Confirm you have read-only permissions by trying to delete a file.\n\ne) Logoff from the PC2 VM.\n\n8. Anonymous access is simple to set up, but it is not very secure. In the next part of the activity, you will configure password-protected file sharing and explore some of the difficulties of managing this in a workgroup.\n\n9. Disable anonymous access and test the effect it has on opening the share from PC2.\n\na) Switch to the PC1 VM. In the Settings app, select Sharing options.\n\nb) Expand the All Networks section\n\nc) Select Turn on password protected sharing.\n\nd) Select Save changes.\n\ne) Switch to the Computer Management console and view the Users folder.\n\nf) Press F5to refresh the view.\n\ng) Verify that the Guest account is now disabled.\n\nh) Leave the Computer Management console open.\n\ni) Switch to the PC2 VM, and sign back on as Sam\n\nj) Open Windows Explorer, and browse to the share by using its UNC path \\PC1\LABFILES.\n\nk) Verify that, after a delay, you are prompted to enter credentials.\n\nl) Try to authenticate by using the user name Sam and password Pa$$w0rd\n\nm) Select Cancel to acknowledge each prompt when this fails.\n\nn) Close Windows Explorer.\n\n10. The Sam user account is local to PC2. PC1 cannot authenticate the account. To configure password-protected access, create the Sam account on PCI, using Pa$$w0rd as the password.\n\na) Switch to the PC1 VM.\n\nb) Select the Computer Management console,\n\nc) Right-click Users and select New User.\n\nd) In the User name box, type Sam\n\ne) Type Pa$$w0rd in the Password and Confirm password boxes.\n\nf) Uncheck User must change password at next logon, and then select the Create button.\n\ng) Select the Close button.\n\nh) Switch to the Pe2 VM.\n\ni) Open Windows Explorer, and browse to the \\PC1\LABFILES share.\nYou should be able to connect this time.\n\n11. Use PC2 to change Sam's password, and observe the effect on accessing the file share.\n\nCreating user accounts on each PC is not an efficient use of administrators’ time. It is also difficult to keep the account credentials in sync.\n\na) On the PC2 VM, press Ctrl+Alt+End, and then select Change a password.\n\nb) Set the new password to NotPa$$w0rd\n\nc) Select OK.\n\nd) Log off and log back on (remembering that the password is now NotPa$$w0rd).\n\ne) Open Windows Explorer, and try to browse to the \\PC1NLABFILES share.\n\nf) Verify that after a delay, you are prompted to enter credentials.\n\ng) Provide the current user name and password, and select Cancel for each prompt.\n\nh) Switch to the PC1 VM.\n\ni) In the Computer Management console, right-click the Sam user account and select Set Password.\n\nj) Observe the warning.\nResetting a password like this can make encrypted files inaccessible.\n\nk) Select Proceed.\n\n1) Set the new password to NotPasSwOrd and select OK.\n\nm) Select OK at the prompt.\n\nn) Switch to PC2, and verify that you can access the share again.\n\n12. In the last part of this activity, you will investigate the permissions configured on the share. Make the MARKETING subfolder writable by Sam's account. You should do this by configuring NTFS permissions (via the folder's Security properties tab).\n\na) Switch to the PC1 VM.\n\nb) Open File Explorer, and browse to the C:\LABFILES folder.\n\nc) Right-click the MARKETING folder and select Properties.\n\nd) Select the Security tab.\n\ne) Select the Edit button\n\nf) In the Permissions for MARKETING dialog box, select the Add button.\n\ng) In the Select Users or Groups dialog box, type sam and then select Check Names.\nThe name should be resolved to PC1\Sam and be underlined.\n\nh) Select ox.\n\nNote: Remember that this is just the display name. The permission is configured using the account SID.\n\ni) In the Permissions for MARKETING dialog box, with the Sam account selected in the top box, in the Permissions for Sam box, check the Allow box for the Modify permission.\n\n[file:///fig-354]\nConfiguring NTFS permissions. (Screenshot used with permission from Microsoft.)\n\nj) Select OK.\n\nk) In the MARKETING Properties dialog box, select OK.\n\nl) Switch to PC2, and verify that you can delete the file in C\LABFILES\MARKETING and create a new file in the folder.\n\nMake sure you understand the permissions that have been configured:\n\n• The LABFILES parent folder NTFS permissions are set to allow the Everyone group read permissions, As Sam is automatically part of the Everyone system group, these are the permissions that apply to the files and most of the subfolders when Sam tries to access them.\n\n• The MARKETING subfolder gives Sam explicit Full Control permissions. When combining the read permission from the parent and the full control permission set here, the most effective permission wins. This means that Sam has full control over objects in the MARKETING subfolder.\n\n13. If you have time, view the share permissions for the folder, and investigate how they interact with NTFS permissions.\n\na) Switch to the PC1 VM.\n\nb) In File Explorer, browse to the C\ root folder.\n\nc) Right-click the LABFILES folder and select Properties.\n\nd) Select the Sharing tab,\n\ne) Select Advanced Sharing\n\nf) In the Advanced Sharing dialog box, select the Permissions button.\n\ng) In the Permissions for LABFILES dialog box, with the Everyone account selected in the top box, in the Permissions for Everyone box, uncheck the Allow boxes for Full Control and Change.\n\n[file:///fig-355.png]\nConfiguring share permissions. (Screenshot used with permission from Microsoft.)\n\nh) Select OK.\n\ni) In the Advanced Sharing dialog box, select OK.\n\nj) In the LABFILES Properties dialog box, select Close.\n\nk) Switch to PC2, and verify that you cannot delete the file you created in C:\LABFILES\MARKETING or create another new file in the folder. Cancel any permission denied error prompts you receive.\nShare permissions apply from the root of the share (but only when the file or folder is, accessed over the network). When combined with NTFS permissions, the most restrictive permission applies, which is why this step failed. You can't avoid setting share permissions, but really you discount them by setting them to Full Control for all valid users and then configuring NTFS permissions to facilitate whatever security policy you want to apply. You can use NTFS permissions to configure rights for different accounts and have different access levels for individual files and subfolders.\n\n14. If you have time, switch to the PC1 VM, and view the Shared Folders snap-in in the Computer Management console.\n\nYou can use this console to create and modify shares, view users connected to shares, and view files opened by users. You can also force open files or sessions to close.\n\n15. At the end of each activity, you need to close the VMs and discard any changes you made.\n\na) From the connection window, select Action Revert.\n\nb) If you are prompted to confirm, select the Revert button.\n\nc) Repeat these steps to revert the PC2 VM.\ntag:C2 L5 TB A5-3

Topic C\n\nConfigure Active Directory Accounts and Policies\n\nEXAM OBJECTIVES COVERED\n1002-1.4 Given a scenario, use appropriate Microsoft command line tools.\n1002-1.8 Given a scenario, configure Microsoft Windows networking on a client/desktop.\n1002-2.2 Explain logical security concepts.\n1002-2.7 Given a scenario, implement security best practices to secure a workstation.\n\nSo far in this lesson, you have managed users and shared resources from a single computer. If you are part of a large organization, you would quickly find that this is a very inefficient way to configure resources. On a network, you can use something called directory-based tools to manage users, groups, and folders.\ntag:C2 L5 TC

WINDOWS ACTIVE DIRECTORY DOMAINS\n\nWindows networking provides two kinds of user account: local and domain. Local accounts are stored in the Local Security Accounts database known as the Security Account Manager (SAM), stored in the registry, as a subkey of HKEY_LOCAL_MACHINE. These accounts are local to the machine and cannot be accessed from other computers. If a user needs access to multiple computers in a workgroup environment, then each computer will need to hold a relevant user account.\n\nDomain accounts are stored in the Active Directory (AD) on a Windows Server Domain Controller (DC). These accounts can be accessed from any computer joined to the domain. Only domain administrators can create these accounts.\ntag:C2 L5 TC

ACTIVE DIRECTORY COMPONENTS\n\nActive Directory is a complex service, with many components. Some of the components that you will encounter as an A+ technician include domain controllers, member servers, and organizational units.\n\nDOMAIN CONTROLLERS\nA domain is the basic administrative building block in Windows client/server networking, To create a domain, you need one or more Windows servers configured as domain controllers.\n\nThe domain controllers store a database of network information called A Directory. This database stores user, group, and computer objects. The domain controllers are responsible for providing authentication services to users as they attempt to logon to the network.\n\nThe servers are controlled by network administrators, who also define client computers and users permitted to access resources. This network model is centralized, robust, scalable, and secure.\n\n[file:///fig-357.png]\nActive Directory security accounts are stored and managed from a domain controller. (Image © |123RF.com,)\n\nMEMBER SERVERS\nMember servers are any server-based systems that have been configured into the domain, but do not maintain a copy of the Active Directory database and are, therefore, unable to provide logon services. Because the user validation process consumes resources, most servers are configured as member servers rather than. domain controllers. They will provide file and print and application server services (such as Exchange for email or SQL Server for database or line-of-business applications).\n\nORGANIZATIONAL UNITS\nOrganizational Units (Us) provide a way of dividing a domain up into different administrative realms. You might create OUs to delegate responsibility for administering different company departments or locations. For example, a "Sales" department manager could be delegated control with rights to add, delete, and modify user accounts but no rights to change account policies, such as requiring complex passwords or managing users in the "Accounts" OU.\ntag:C2 L5 TC

DOMAIN MEMBERSHIP\n\nTo fully participate in the benefits of an Active Directory domain, client computers, must become members of the domain. Domain membership means:\n\n• The computer has a computer account object within the directory database.\n\n• Computer users can log on to the domain with domain user accounts.\n\n• The computer and its users are subject to centralized domain security, configuration, and policy settings.\n\n• Certain domain accounts automatically become members of local groups on the\ncomputer.\n\n• Client computers within the domain allow users to access the network's services.\n\nIn Windows 7, Windows 8/8.1, and Windows 10, you can use the System Properties dialog box to join a domain. On a Windows 10 PC, you can also use the Settings app to join a domain.\n\n[file:///fig-358.png]\nJoining a domain using the Settings app in Windows 10. (Screenshot used with permission from Microsoft.)\n\nNote: The other option is to join an Azure Active Directory. Azure is essentially a cloud: hosted version of AD.\ntag:C2 L5 TC

DOMAIN SIGN-IN\n\nTo use services in the domain, the user must sign into the PC using a domain account. The Other user option in the sign in screen will provide a domain option if it is not the default. You can also enter a username in the format Domain\UserName to specify a domain login.\n\n[file:///fig-359.png] \nSigning into a domain, (Screenshot used with permission from Microsoft.)\ntag:C2 L5 TC

GROUP POLICY OBJECTS\n\nOn a standalone workstation, security policies for the local machine and for local accounts are configured via the Local Security Policy or Local Group Policy snap-in. In an AD domain, they can be configured via Group Policy Objects (GPOs). GPOs are a means of applying security settings (as well as other administrative settings) across a range of computers and users. GPOs are linked to network administrative boundaries in Active Directory, such as domains and OUs.\n\nGPOs can be used to configure software deployment, Windows settings, and, through the use of Administrative Templates, custom Registry settings. Settings can also be configured on a per-user or per-computer basis.\n\nA system of inheritance determines the Resultant Set of Policies (RSoPs) that apply to a particular computer or user. GPOs can be set to override or block policy inheritance where necessary.\n\nWindows ships with default security templates to provide the basis for GPOs (configuration baselines). These can be modified using the Group Policy Editor or Group Policy Management Console (GPMC). GPOs can be linked to objects in Active Directory using the object's property sheet.\n\n[file:///fig-360.png]\nGroup Policy Management. (Screenshot used with permission from Microsoft.)\n\nSECURITY POLICY UPDATES\nWhen updating local or group security policies, it is important to be familiar with the use of two command-line tools:\n\n• gpupdate —policies are applied at log on and refreshed periodically (normally every 90 minutes). The gpupdate command is used to apply a new or changed policy to a computer immediately whereas gpupdate / f or Ce causes all policies (new and old) to be reapplied. The gpupdate command can be used with //onoff or /boot to allow a sign-out or reboot if the policy setting requires it.\n\n• gpresult —displays the RSoP for a computer and user account. When run without switches, the current computer and user account policies are shown. The /s, /u, and /p switches can be used to specify a host (by name or IP address), user account, and password.\ntag:C2 L5 TC

BASIC AD FUNCTIONS\n\nWindows Server versions are quite similar to their desktop equivalent, so Windows Server 2016 shares many of the features of Windows 10. In Windows Server, the ‘Server Manager app provides a single location where you can access server management tools. When you install Active Directory on a server, several management consoles are added to the Tools menu in Server Manager.\n\n[file:///fig-361.png]\nAccessing the AD management consoles via Server Manager. (Screenshot used with permission from Microsoft.)\n\nNote: Logging in locally to the server is burdensome and an increased security risk. More typically, you will install the Remote Server Administration Tools (RSATS) to your local computer to connect to the server to make changes.\n\nACCOUNT CREATION AND DELETION\nThe Active Directory Users and Computers console allows you to manage users, groups, and Organizational Units. By default, there are some existing containers and OUs to store some of the default accounts created when AD is installed. You can create more OUs to store accounts in. You can use OUs to store accounts that have a similar security or administrative profile.\n\nTo create a new user account, right-click in the container or OU where you want to store the account and select New—User.\n\nComplete the username fields then in the next dialog box, choose an initial password. The default option is to force the user to select a new password at first sign in.\n\nYou can delete a user account by right-clicking the object and selecting Delete. Deleting an account is not easy to reverse, though AD does now support a Recycle Bin feature. In many circumstances, it may be more appropriate to disable an account. Once an account is disabled, the user is denied access to the network until the administrator re-enables the account.\n\n[file:///fig-362.png]\n(Creating a new user account in AD. (Screenshot used with permission from Microsoft.)\n\nNote: To learn more, check the Video tile on the CHOICE Course screen for any videos that supplement the content for this lesson.\ntag:C2 L5 TC

LOGON SCRIPTS\n\nLogon scripts, also known as login scripts or sign-in scripts, run when a user logs on to a. computer. User logon scripts can be assigned to users as part of a group policy. Logon scripts can be used to configure the environment for the user—setting environmental variables, setting a home folder, mapping drives to specific server- based folders, and mapping to printers or other resources, for example. A logon script can also be used to ensure that the client meets the security requirements for signing on to the network. For example, if the client has out-of-date software, logon can be denied until the software is updated.\n\nIf possible, assign logon scripts to the largest number of users that need the same configuration. A script can be assigned at the domain level, the OU level, or security group level. If a user requires additional or different settings, a logon script can be created for individual users, but that is one more item to maintain.\ntag:C2 L5 TC

HOME FOLDER\n\nA home folder is a private network storage area located in a shared network server folder in which users can store personal files. The home folder can be created for domain users through the Active Directory Users and Computers tool. Using home folders, administrators can more easily create backups of user files because all of the files are located in one place on a file server. If the administrator doesn't assign a home folder location, the computer will automatically use the Documents folder location as the default home folder.\n\n[file:///fig-363.png]\nThe home folder is configured as a Profile property for a user. (Screenshot used with permission from Microsoft.)\n\ntag:C2 L5 TC

FOLDER REDIRECTION\n\nBy default, user settings and data files are stored in a local user profile located in the Users folder. For users that work on more than one computer, they will have separate profiles on each computer and the data files stored on the first computer are not available on the second computer. Microsoft created a couple of technologies to deal with this issue. One is folder redirection and the second is roaming profiles. Folder redirection allows an administrative user to redirect the path of a local folder (such as the user's home folder) to a folder on a network share. Roaming profiles redirect user profiles to a network share as well. By using both folder redirection and roaming profiles, the user's data and profile information is available when the user logs into any computer on the network where the network share is located.\n\nBENEFITS OF USING FOLDER REDIRECTION\nBy having folders redirected from local storage to network storage, administrators can back up user data while backing up network data folders. This ensures that user data is being backed up without relying on users to back up their data.\n\nAnother benefit is, by using folder redirection with roaming profiles and the offline files feature, users can access network files even if the network is unavailable, if network access is slow, or users are working offline.\ntag:C2 L5 TC

ACCOUNT LOCKS AND PASSWORD RESETS\n\nIf a user account violates a security policy, such as an incorrect password being entered repeatedly, it may be locked against further use. The account will be inaccessible until it is unlocked by setting the option in the Properties dialog box on the Account tab.\n\n[file:///fig-365.png]\nUsing the Properties dialog box to unlock a user account. (Screenshot used with permission from Microsoft.)\n\nIf a user forgets a password, you can reset it by right-clicking the account and selecting Reset Password. You can use this dialog as another way to unlock an account too.\ntag:C2 L5 TC

Activity 5-4\nDiscussing Active Directory Account and Policy Configuration\n\nSCENARIO\nAnswer the following questions to check your understanding of the topic.\n\n1. What type of computer stores Active Directory account information?\n\n2. What are the prerequisites for joining a computer to a domain?\n\n3. True or false? If you want the same policy to apply to a number of computers within a domain, you could add the computers to the same Organizational Unit (OU) and apply the policy to the OU.\n\n4. What is the difference between the gpupdate and gpresult commands?\n\n5. In Active Directory, what are the options for runninga script each time the user logs on?\n\n6. How do you unlock an AD user account?\ntag:C2 L5 TC A5-4

Activity 5-5\nConfiguring Active Directory Accounts and Policies\n\nBEFORE YOU BEGIN\n\nIn this activity, you will configure accounts and settings on servers and clients within an Active Directory (AD) domain. Take a moment to review the VMs available on the local network.\n\n[file:///fig-367.png]\nNetwork environment for the activity\n\nThere are two Windows Server VMs. The DC1 VM is running Active Directory and DNS and has the IP address 10.1.0.1. The MS1 VM is running DHCP and has the static address 10.1.0.2. The PC1 and PC2 VMs are the Windows 10 and Windows 7 client workstations. Their addresses are dynamically assigned by the DHCP server from the range 10.1.0.101 to 10.1.0.109.\n\nSCENARIO\nIn this activity, you will look at some of the features of a Windows domain server-based network by configuring a user account, GPO, and folder redirection.\n\n1) Start the VMs to create the network. You do not need to open connection windows for the VMs unless prompted.\n\na) In Hyper-V Manager, right-click RT1-LOCAL and select Start.\n\nb) Right-click DC1 and select Start:\n\nc) Wait until the DC1 thumbnail shows the logon screen, and then start MS1.\n\nd) Wait until the MS1 thumbnail shows the logon screen, and then start PC1 and PC2.\n\ne) Open a connection window for PC1.\n\nf) Sign-on using the account 525support\Administrator and password Pa$$w0rd\n\n2. Investigate the domain's DNS suffix, and test connectivity with the Domain Controller.\n\na) Point to the network status icon.\n\nThe tooltip should identify the connection as corp.515support.com. This is the DNS suffix for the domain.\n\n[file:///fig-368.png]\nChecking the network status. (Screenshot used with permission from Microsoft.)\n\nUsing a subdomain such as corp (ad is also popular, but any label can be used) is one way of configuring the namespace for the local AD network. Some companies use the same domain name (515support.com) internally and externally. Users only need to Use the simple domain label (515support) to sign on.\n\nb) Open a command prompt. Run the command hostname.\nThis reports the local machine's name (PC1)\n\nc) Run ipconfig and record the Connection-specific DNS Suffix parameter.\n\nd) Run the following command: ping pc1\nThe command automatically appends the DNS suffix to the hostname to use the Fully Qualified Domain Name (FQDN) of pc1.corp.515support.com.\n\ne) Run the following command: ping dc1\nThe test should be successful\n\nf) Close the command prompt.\n\n3. The PC1 VM has been installed with the Remote Server Administration Tools (RSAT). These allow administrators to configure the domain without having to sign on to the DC locally. Use RSAT to view the domain's DNS server, running on DC1.\n\na) On PC1, select Start→Windows Administrative Tools→DNS.\n\nb) In the Connect to DNS Server dialog box, select The following computer. Type dc1 and select OK.\n\nc) In the DNS console, expand dc1→Forward Lookup Zones→corp.515support.com.\nA Forward Lookup Zone is a list of host names mapped to IP addresses. You can see automatically registered A host records for each VM in the zone. The record contains the IPv4 address assigned by DHCP. Each host name is appended with the domain suffix (corp.515support.com) to create a Fully Qualified Domain Name (FQDN). The servers also have IPv6 (AAA) host records.\n\n[file:///fig-369.png]\nViewing DNS records. (Screenshot used with permission from Microsoft.)\n\nThe updates alias record (CNAME) enables a host to be accessed by using a different label.\n\nd) Start the web browser and open updates.corp.51S5support.com.\nA web page showing the company's update portal is returned,\n\ne) Switch back to the DNS console, and open the _tcp folder.\nThis is one of the folders containing records that support Windows domain services. Clients use these service records to sign on and query the directory. There is a record for LDAP (Lightweight Directory Access Protocol).\n\nf) Close all open windows on the PC1 VM.\n\n4. Use RSAT to create a new domain user account called David, and then add David to the Sales security group (this has been created for you already).\n\na) On the PC1 VM, select Start→Windows Administrative Tools→Active Directory Users and Computers.\n\nb) In the left pane, expand corp.515support.com→Users,\n\nc) Right-click Users and select New→User.\n\nd) In the New Object - User dialog box, in the First name box, type David\n\ne) In the User logon name box, type david and then select Next.\n\nf) In the Password and Confirm password boxes, type Pa$$w0rd\n\ng) Clear the User must change password at next logon box and check the Password never expires box. Select Next and then select Finish.\n\nh) In Active Directory Users and Computers, in the main pane, right-click the David user account and select Add toa group.\n\ni) In the Enter the object names box, type safes then select the Check Names button.\nThe name should be underlined to show that it has been matched to a valid Active Directory object.\n\nj) Select OK, then confirm the prompt by selecting OK again.\n \nk) Observe that the Users folder contains both user and security group accounts.\nObserve some of the built-in Active Directory security groups, such as Domain Admins and Domain Users.\n\nl) Locate the Sales security group account. Right-click it and select Properties. Inspect the Members and Member Of tabs.\n\nSecurity groups can both contain user and group accounts and be members of other group accounts. This nesting allows sophisticated permissions systems to be implemented\n\nm) Select Cancel.\n\nIn this example, using a group hasn't saved much time. But if you imagine a sales department with a few hundred users who all need the same permissions to be allocated, you can understand why using groups is more efficient and secure than allocating permissions directly to user accounts.\n\nn) View the ComputersOU and Domain Controllers folders. These are Organizational Unit (OU) containers. They contain the accounts for the domain-joined computers. The DC1s in a separate container to the other computers. This means it is easy to apply different policies to it. Most networks would have separate containers for member servers and client computers too (or even more subdivisions).\n\n5. Create a shared folder on MS1 called HOME, and configure the share permissions to give Full Control to the Everyone group.\n\na) Open a connection window for MS1.\n\nb) Sign on using the account 525supporti Administrator and password Pa$$w0rd.\n\nc) Open File Explorer, and create a folder named HOMEin the C:\ root folder.\n\nd) Right-click the HOME folder and select Properties.\n\ne) Select the Sharing tab and then select the Advanced Sharing button.\n\nf) Check the Share this folder box and then select the Permissions button.\n\ng) With Everyone selected, check the Allow box for Full Control.\n\n[file:///fig-371.png]\nConfiguring shared folder permissions, (Screenshot used with permission from Microsoft.)\n\nh) Select OK.\n\ni) In the Advanced Sharing dialog box, select OK. Leave the HOME Properties dialog box open.\n\n6. To allow the redirection process to copy each user's folders and keep them private to each user, you need to configure specific permissions on the parent folder and disable inheritance.\n\na) In the HOME Properties dialog box, select the Security tab and then select the Advanced button.\n\nb) In the Advanced Security Settings for HOME dialog box, select the Disable inheritance button.\n\nc) At the prompt, select Convert inherited permissions into explicit permissions on this object.\nThis detaches the HOME folder from inheriting permission from the C:\ parent folder.\n\nd) Select each Users (MS1\Users) entry and select Remove.\n\n[file:///fig-371a.png]\nConfiguring NTFS permissions on the share. (Screenshot used with permission from Microsoft.)\n\ne) Select the Add button.\n\nf) In the Permission entry for HOME dialog box, select the Select a principal link.\n\ng) In the Select Users or Groups dialog box, type authenticated users in the box and select Check Names.\n\nh) Select OK.\n\ni) From the Applies to box, select This folder only.\n\nj) Select Show advanced permissions.\n\nk) Change the selections so that only the following are checked: Traverse folder / execute file, Read attributes, and Create folders / append data.\n\n[file:///fig-372.png]\nConfiguring an NTFS permission entry on the share. (Screenshot used with permission from Microsoft.)\n\nl) Select OK.\n\nThe effect of these permissions isto allow an authenticated user to create folders within HOME. The folders that get created will NOT inherit these permissions and so will be created with default permissions (full control for the user that created the folder).\n\nm) In the Advanced Security Settings for HOME dialog box, select OK.\n\nn) In the HOME Properties dialog box, select Close.\n\n7. Create a logon script to map the folder \\DC1\LABFILES as the L: drive.\n\na) Switch to the PC1 VM.\n\nb) Use the desktop icon to start Notepad++.\n\nc) Enter the following command: net use \\DC1\LABFILES / persistent:yes\n\nd) Select File→Save. In the left pane, select Desktop. In the File name box, type map.bat and then select the Save button.\n\n7. Create a GPO to run the script, and attach the GPO to the domain.\n\na) On the PC1 VM, right-click the map file on the desktop and select Copy.\n\nb) Select Start→Windows Administrative Tools→Group Policy Management,\n\nc) Expand Forest→Domains corp.515support.com. Right-click corp.515support.com and select Create a GPO in this domain, and Link it here.\n\nd) In the New GPO dialog box, in the Name box, type 515 Support Logon Policy. Select OK.\n\ne) Right-click 515 Support Logon Policy and select Edit.\n\nf) In the Group Policy Management window, expand User Configuration→Policies→Windows Settings and select Scripts. Double-click Logon.\n\ng) In the Logon Properties dialog box, select the Show Files button.\n\nh) Right-click in the Explorer window and select Paste to copy the map file to the folder; then, close the Explorer window.\n\ni) In the Logon Properties dialog box, select the Add button. In the Add a Script dialog box, select the Browse button. Select map and select Open.\n\nj) Select OK in the Add a Script dialog box and in the Logon Properties dialog box.\n\n9. Configure the folder redirection policy within the current GPO,\n\na) In the Group Policy Management Editor window, expand User Configuration→Policies→Windows Settings→Folder Redirection.\n\nb) Right-click Documents and select Properties.\n\nc) In the Documents Properties dialog box, from the Setting list box, select Basic- Redirect everyone's folder to the same location.\n\nd) In the Root path box, type \\MS1\HOME\n\ne) Select OK Confirm the prompt by selecting Yes.\n\n10. Test the new policy using the current account on PC1.\n\na) On the PC1 VM, open File Explorer.\n\nb) Copy some of the files from C:\LABFILES into the Documents folder.\n\nc) Open a command prompt and run gpupdate\n\nNote the message—you must log off and log back on for folder redirection to be applied.\n\nd) Sign out from PC1.\n\ne) Select Other user. Use the user name 515support\ administrator and Pa$$w0rd as the password.\n\nYou might notice that sign on seems slower than before. This is because the files you copied to Documents are being moved to the \\MS1\HOME share,\n\nf) Open File Explorer and observe the Sync icon on the Documents folder.\n\n[file:///fig-373.png]\nFolder redirection applied to the Documents folder. (Screenshot used with permission from Microsoft.)\n\ng) Open the Syne Center from Control Panel. Are there any errors?\nYou will likely see a Status of Ready for first sync.\n\n11. Test the new policy by using the David account on PC2,\n\na) Open a connection window for the PC2 VM, and sign in using the account name David and password Pa$$w0rd\n\nb) Open Explorer and verify that the L: drive is mapped to \\DC1\LABFILES.\n\nc) Open the Documents library, and verify that the My Documents folder is set up to sync. Test that you can create and edit a new file in the folder.\n\nd) View the Syne Center in Control Panel.\n\n12. Optionally, switch to the MS1 VM, and examine the contents of HOME.\n\nYou should see folders for Administrator and David. You will not be able to view the contents of these folders because the redirection policy gave users exclusive access,\n\n13. At the end of each activity, you need to close the VMs. You will always discard any changes you made.\n\na) From the connection window, select Action Revert.\n\nb) If prompted, select the Revert button to confirm.\n\nc) On the HOST, in the Hyper-V Manager console, right-click each VM that is still running and select Revert, At the end of the activity, the state of each VM should be listed as OFF.\ntag:C2 L5 TC A5-5

Summary\n\nIn this lesson, you managed user accounts, workstations, and shared resources. These administrative tasks are critical knowledge for any A* technician.\n\nWhat experiences do you have in working with any of the technologies discussed in this lesson?\n\nWhich AD configuration task do you expect to perform most often in your workplace?\ntag:C2 L5 SUMMARY

